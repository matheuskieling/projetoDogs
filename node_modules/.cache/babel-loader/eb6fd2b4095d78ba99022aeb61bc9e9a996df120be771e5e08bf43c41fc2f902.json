{"ast":null,"code":"import _objectSpread from\"C:/Users/mathe/Documents/backu\\u1E55/programming/origamid/react/projetoFinalDogs/dogs/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/mathe/Documents/backu\\u1E55/programming/origamid/react/projetoFinalDogs/dogs/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{PHOTO_POST}from'../../api';import useFetch from'../../Hooks/useFetch';import useForm from'../../Hooks/useForm';import Error from'../Helper/Error';import Button from'../Forms/Button';import Input from'../Forms/Input';import styles from'./UserPhotoPost.module.css';import{useNavigate}from'react-router-dom';import Head from'../Helper/Head';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserPhotoPost=function UserPhotoPost(){var nome=useForm();var peso=useForm('number');var idade=useForm('number');var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),img=_React$useState2[0],setImg=_React$useState2[1];var _useFetch=useFetch(),data=_useFetch.data,error=_useFetch.error,loading=_useFetch.loading,request=_useFetch.request;var navigate=useNavigate();React.useEffect(function(){if(data)navigate('/conta');},[data,navigate]);function handleSubmit(event){event.preventDefault();var formData=new FormData();formData.append('img',img.raw);formData.append('nome',nome.value);formData.append('peso',peso.value);formData.append('idade',idade.value);var token=window.localStorage.getItem('token');var _PHOTO_POST=PHOTO_POST(formData,token),url=_PHOTO_POST.url,options=_PHOTO_POST.options;request(url,options);}function handleImgChange(_ref){var target=_ref.target;setImg({preview:URL.createObjectURL(target.files[0]),raw:target.files[0]});}return/*#__PURE__*/_jsxs(\"section\",{className:\"\".concat(styles.photoPost,\" animeLeft\"),children:[/*#__PURE__*/_jsx(Head,{title:\"Poste sua Foto\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Nome\",type:\"text\",name:\"nome\"},nome)),/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Peso\",type:\"number\",name:\"peso\"},peso)),/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Idade\",type:\"number\",name:\"idade\"},idade)),/*#__PURE__*/_jsx(\"input\",{className:styles.file,type:\"file\",name:\"img\",id:\"img\",onChange:handleImgChange}),loading?/*#__PURE__*/_jsx(Button,{disabled:true,children:\"Enviando...\"}):/*#__PURE__*/_jsx(Button,{children:\"Enviar\"}),/*#__PURE__*/_jsx(Error,{error:error})]}),/*#__PURE__*/_jsx(\"div\",{children:img.preview&&/*#__PURE__*/_jsx(\"div\",{className:styles.preview,style:{backgroundImage:\"url('\".concat(img.preview,\"')\")}})})]});};export default UserPhotoPost;","map":{"version":3,"names":["React","PHOTO_POST","useFetch","useForm","Error","Button","Input","styles","useNavigate","Head","UserPhotoPost","nome","peso","idade","useState","img","setImg","data","error","loading","request","navigate","useEffect","handleSubmit","event","preventDefault","formData","FormData","append","raw","value","token","window","localStorage","getItem","url","options","handleImgChange","target","preview","URL","createObjectURL","files","photoPost","file","backgroundImage"],"sources":["C:/Users/mathe/Documents/backuá¹•/programming/origamid/react/projetoFinalDogs/dogs/src/Components/User/UserPhotoPost.js"],"sourcesContent":["import React from 'react';\r\nimport { PHOTO_POST } from '../../api';\r\nimport useFetch from '../../Hooks/useFetch';\r\nimport useForm from '../../Hooks/useForm';\r\nimport Error from '../Helper/Error';\r\nimport Button from '../Forms/Button';\r\nimport Input from '../Forms/Input';\r\nimport styles from './UserPhotoPost.module.css';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Head from '../Helper/Head';\r\n\r\nconst UserPhotoPost = () => {\r\n  const nome = useForm();\r\n  const peso = useForm('number');\r\n  const idade = useForm('number');\r\n  const [img, setImg] = React.useState({});\r\n  const { data, error, loading, request } = useFetch();\r\n  const navigate = useNavigate();\r\n\r\n  React.useEffect(() => {\r\n    if (data) navigate('/conta');\r\n  }, [data, navigate]);\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('img', img.raw);\r\n    formData.append('nome', nome.value);\r\n    formData.append('peso', peso.value);\r\n    formData.append('idade', idade.value);\r\n\r\n    const token = window.localStorage.getItem('token');\r\n    const { url, options } = PHOTO_POST(formData, token);\r\n    request(url, options);\r\n  }\r\n\r\n  function handleImgChange({ target }) {\r\n    setImg({\r\n      preview: URL.createObjectURL(target.files[0]),\r\n      raw: target.files[0],\r\n    });\r\n  }\r\n\r\n  return (\r\n    <section className={`${styles.photoPost} animeLeft`}>\r\n      <Head title=\"Poste sua Foto\" />\r\n      <form onSubmit={handleSubmit}>\r\n        <Input label=\"Nome\" type=\"text\" name=\"nome\" {...nome} />\r\n        <Input label=\"Peso\" type=\"number\" name=\"peso\" {...peso} />\r\n        <Input label=\"Idade\" type=\"number\" name=\"idade\" {...idade} />\r\n        <input\r\n          className={styles.file}\r\n          type=\"file\"\r\n          name=\"img\"\r\n          id=\"img\"\r\n          onChange={handleImgChange}\r\n        />\r\n        {loading ? (\r\n          <Button disabled>Enviando...</Button>\r\n        ) : (\r\n          <Button>Enviar</Button>\r\n        )}\r\n        <Error error={error} />\r\n      </form>\r\n      <div>\r\n        {img.preview && (\r\n          <div\r\n            className={styles.preview}\r\n            style={{ backgroundImage: `url('${img.preview}')` }}\r\n          ></div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default UserPhotoPost;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}