{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/mathe/Documents/backu\\u1E55/programming/origamid/react/projetoFinalDogs/dogs/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/mathe/Documents/backu\\u1E55/programming/origamid/react/projetoFinalDogs/dogs/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/mathe/Documents/backu\\u1E55/programming/origamid/react/projetoFinalDogs/dogs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mathe/Documents/backu\\u1E55/programming/origamid/react/projetoFinalDogs/dogs/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useNavigate}from'react-router-dom';import{PASSWORD_RESET}from'../../api';import useFetch from'../../Hooks/useFetch';import useForm from'../../Hooks/useForm';import Button from'../Forms/Button';import Input from'../Forms/Input';import Error from'../Helper/Error';import Head from'../Helper/Head';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPasswordReset=function LoginPasswordReset(){var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),login=_React$useState2[0],setLogin=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),key=_React$useState4[0],setKey=_React$useState4[1];var password=useForm();var _useFetch=useFetch(),error=_useFetch.error,loading=_useFetch.loading,request=_useFetch.request;var navigate=useNavigate();React.useEffect(function(){var params=new URLSearchParams(window.location.search);var key=params.get('key');var login=params.get('login');if(key)setKey(key);if(login)setLogin(login);},[]);function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _PASSWORD_RESET,url,options,_yield$request,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();if(!password.validate()){_context.next=9;break;}_PASSWORD_RESET=PASSWORD_RESET({login:login,key:key,password:password.value}),url=_PASSWORD_RESET.url,options=_PASSWORD_RESET.options;_context.next=5;return request(url,options);case 5:_yield$request=_context.sent;response=_yield$request.response;console.log(response);if(response.ok)navigate('/login');case 9:case\"end\":return _context.stop();}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"section\",{className:\"animeLeft\",children:[/*#__PURE__*/_jsx(Head,{title:\"Resete a Senha\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Resete a Senha\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Nova Senha\",type:\"password\",name:\"password\"},password)),loading?/*#__PURE__*/_jsx(Button,{disabled:true,children:\"Resetando...\"}):/*#__PURE__*/_jsx(Button,{children:\"Resetar\"})]}),/*#__PURE__*/_jsx(Error,{error:error})]});};export default LoginPasswordReset;","map":{"version":3,"names":["React","useNavigate","PASSWORD_RESET","useFetch","useForm","Button","Input","Error","Head","LoginPasswordReset","useState","login","setLogin","key","setKey","password","error","loading","request","navigate","useEffect","params","URLSearchParams","window","location","search","get","handleSubmit","event","preventDefault","validate","value","url","options","response","console","log","ok"],"sources":["C:/Users/mathe/Documents/backuá¹•/programming/origamid/react/projetoFinalDogs/dogs/src/Components/Login/LoginPasswordReset.js"],"sourcesContent":["import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { PASSWORD_RESET } from '../../api';\r\nimport useFetch from '../../Hooks/useFetch';\r\nimport useForm from '../../Hooks/useForm';\r\nimport Button from '../Forms/Button';\r\nimport Input from '../Forms/Input';\r\nimport Error from '../Helper/Error';\r\nimport Head from '../Helper/Head';\r\n\r\nconst LoginPasswordReset = () => {\r\n  const [login, setLogin] = React.useState('');\r\n  const [key, setKey] = React.useState('');\r\n  const password = useForm();\r\n  const { error, loading, request } = useFetch();\r\n  const navigate = useNavigate();\r\n\r\n  React.useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const key = params.get('key');\r\n    const login = params.get('login');\r\n    if (key) setKey(key);\r\n    if (login) setLogin(login);\r\n  }, []);\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n    if (password.validate()) {\r\n      const { url, options } = PASSWORD_RESET({\r\n        login,\r\n        key,\r\n        password: password.value,\r\n      });\r\n      const { response } = await request(url, options);\r\n      console.log(response);\r\n      if (response.ok) navigate('/login');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section className=\"animeLeft\">\r\n      <Head title=\"Resete a Senha\" />\r\n      <h1 className=\"title\">Resete a Senha</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <Input\r\n          label=\"Nova Senha\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          {...password}\r\n        />\r\n        {loading ? (\r\n          <Button disabled>Resetando...</Button>\r\n        ) : (\r\n          <Button>Resetar</Button>\r\n        )}\r\n      </form>\r\n      <Error error={error} />\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default LoginPasswordReset;\r\n"],"mappings":"2rBAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,cAAc,KAAQ,WAAW,CAC1C,MAAOC,SAAQ,KAAM,sBAAsB,CAC3C,MAAOC,QAAO,KAAM,qBAAqB,CACzC,MAAOC,OAAM,KAAM,iBAAiB,CACpC,MAAOC,MAAK,KAAM,gBAAgB,CAClC,MAAOC,MAAK,KAAM,iBAAiB,CACnC,MAAOC,KAAI,KAAM,gBAAgB,CAAC,wFAElC,GAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,EAAS,CAC/B,oBAA0BT,KAAK,CAACU,QAAQ,CAAC,EAAE,CAAC,oDAArCC,KAAK,qBAAEC,QAAQ,qBACtB,qBAAsBZ,KAAK,CAACU,QAAQ,CAAC,EAAE,CAAC,qDAAjCG,GAAG,qBAAEC,MAAM,qBAClB,GAAMC,SAAQ,CAAGX,OAAO,EAAE,CAC1B,cAAoCD,QAAQ,EAAE,CAAtCa,KAAK,WAALA,KAAK,CAAEC,OAAO,WAAPA,OAAO,CAAEC,OAAO,WAAPA,OAAO,CAC/B,GAAMC,SAAQ,CAAGlB,WAAW,EAAE,CAE9BD,KAAK,CAACoB,SAAS,CAAC,UAAM,CACpB,GAAMC,OAAM,CAAG,GAAIC,gBAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAC1D,GAAMZ,IAAG,CAAGQ,MAAM,CAACK,GAAG,CAAC,KAAK,CAAC,CAC7B,GAAMf,MAAK,CAAGU,MAAM,CAACK,GAAG,CAAC,OAAO,CAAC,CACjC,GAAIb,GAAG,CAAEC,MAAM,CAACD,GAAG,CAAC,CACpB,GAAIF,KAAK,CAAEC,QAAQ,CAACD,KAAK,CAAC,CAC5B,CAAC,CAAE,EAAE,CAAC,CAAC,QAEQgB,aAAY,kJAA3B,iBAA4BC,KAAK,2KAC/BA,KAAK,CAACC,cAAc,EAAE,CAAC,IACnBd,QAAQ,CAACe,QAAQ,EAAE,yCACI5B,cAAc,CAAC,CACtCS,KAAK,CAALA,KAAK,CACLE,GAAG,CAAHA,GAAG,CACHE,QAAQ,CAAEA,QAAQ,CAACgB,KACrB,CAAC,CAAC,CAJMC,GAAG,iBAAHA,GAAG,CAAEC,OAAO,iBAAPA,OAAO,uBAKOf,QAAO,CAACc,GAAG,CAAEC,OAAO,CAAC,qCAAxCC,QAAQ,gBAARA,QAAQ,CAChBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC,CACrB,GAAIA,QAAQ,CAACG,EAAE,CAAElB,QAAQ,CAAC,QAAQ,CAAC,CAAC,qDAEvC,+CAED,mBACE,iBAAS,SAAS,CAAC,WAAW,wBAC5B,KAAC,IAAI,EAAC,KAAK,CAAC,gBAAgB,EAAG,cAC/B,WAAI,SAAS,CAAC,OAAO,UAAC,gBAAc,EAAK,cACzC,cAAM,QAAQ,CAAEQ,YAAa,wBAC3B,KAAC,KAAK,gBACJ,KAAK,CAAC,YAAY,CAClB,IAAI,CAAC,UAAU,CACf,IAAI,CAAC,UAAU,EACXZ,QAAQ,EACZ,CACDE,OAAO,cACN,KAAC,MAAM,EAAC,QAAQ,eAAC,cAAY,EAAS,cAEtC,KAAC,MAAM,WAAC,SAAO,EAChB,GACI,cACP,KAAC,KAAK,EAAC,KAAK,CAAED,KAAM,EAAG,GACf,CAEd,CAAC,CAED,cAAeP,mBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}